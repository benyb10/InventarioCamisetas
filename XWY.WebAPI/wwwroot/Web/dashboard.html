<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard - UniformesUTA</title>
    <link rel="stylesheet" href="/Web/styles.css">
    <link rel="icon" type="image/x-icon" href="/favicon.ico">
</head>
<body>
    <div class="dashboard-container">
        <nav class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <h3>UniformesUTA</h3>
                    <p>Universidad Técnica de Ambato</p>
                </div>
            </div>

            <ul class="sidebar-menu">
                <li>
                    <a href="#" id="menu-home" class="menu-item active">
                        <span class="icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                            </svg>
                        </span>
                        <span>Inicio</span>
                    </a>
                </li>

                <li>
                    <a href="#" id="menu-articulos" class="menu-item">
                        <span class="icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1zM10 6a2 2 0 0 1 4 0v1h-4V6zm8 15a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V9h2v1a1 1 0 0 0 2 0V9h4v1a1 1 0 0 0 2 0V9h2v12z" />
                            </svg>
                        </span>
                        <span>Gestión de Uniformes</span>
                    </a>
                </li>

                <li>
                    <a href="#" id="menu-prestamos" class="menu-item">
                        <span class="icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" />
                                <path d="M14 2v6h6M16 13H8M16 17H8M10 9H8" />
                            </svg>
                        </span>
                        <span>Gestión de Préstamos</span>
                    </a>
                </li>

                <li>
                    <a href="#" id="menu-usuarios" class="menu-item">
                        <span class="icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM12 14a7 7 0 0 0-7 7h14a7 7 0 0 0-7-7z" />
                            </svg>
                        </span>
                        <span>Gestión de Usuarios</span>
                    </a>
                </li>

                <li>
                    <a href="#" id="menu-reportes" class="menu-item">
                        <span class="icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M3 3v18h18V3H3zm16 16H5V5h14v14zM7 12h2v5H7v-5zm4-3h2v8h-2V9zm4-3h2v11h-2V6z" />
                            </svg>
                        </span>
                        <span>Reportes</span>
                    </a>
                </li>
            </ul>

            <div class="sidebar-footer">
                <div class="user-info">
                    <div class="user-avatar">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M12 2C13.1 2 14 2.9 14 4C14 5.1 13.1 6 12 6C10.9 6 10 5.1 10 4C10 2.9 10.9 2 12 2ZM21 9V7L15 1.5V6H9V1.5L3 7V9H21ZM12 8C10.9 8 10 8.9 10 10V22H14V10C14 8.9 13.1 8 12 8Z" />
                        </svg>
                    </div>
                    <div class="user-details">
                        <span id="userName">Usuario</span>
                        <small id="userRole">Rol</small>
                    </div>
                </div>

                <button id="logoutBtn" class="btn btn-logout">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M17 7l-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.59L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4V5z" />
                    </svg>
                    Cerrar Sesión
                </button>
            </div>
        </nav>

        <main class="main-content">
            <header class="content-header">
                <div class="header-left">
                    <h1 id="pageTitle">Sistema de Gestión de Uniformes Deportivos</h1>
                    <p class="header-subtitle">Universidad Técnica de Ambato - Cultura Física</p>
                </div>

                <div class="header-actions">
                    <button id="refreshBtn" class="btn btn-ghost">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                            <path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z" />
                        </svg>
                        Actualizar
                    </button>

                    <div class="time-display">
                        <span id="currentTime"></span>
                    </div>
                </div>
            </header>

            <div id="content-area" class="content-area">
                <div class="welcome-section">
                    <div class="welcome-header">
                        <h2>Bienvenido/a, <span id="welcomeUserName" class="user-highlight"></span></h2>
                        <p class="welcome-description">
                            Sistema de gestión de uniformes deportivos para la Carrera de Cultura Física y Entrenamiento Deportivo.
                            Seleccione una opción del menú lateral para comenzar.
                        </p>
                    </div>

                    <div class="dashboard-stats">
                        <div class="stat-card">
                            <div class="stat-icon uta-blue">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M19 7h-3V6a4 4 0 0 0-8 0v1H5a1 1 0 0 0-1 1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8a1 1 0 0 0-1-1z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalArticulos">-</h3>
                                <p>Total de Uniformes</p>
                                <small>Disponibles en inventario</small>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon uta-gold">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 id="prestamosPendientes">-</h3>
                                <p>Préstamos Activos</p>
                                <small>En proceso o entregados</small>
                            </div>
                        </div>

                        <div class="stat-card">
                            <div class="stat-icon uta-red">
                                <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0zM12 14a7 7 0 0 0-7 7h14a7 7 0 0 0-7-7z" />
                                </svg>
                            </div>
                            <div class="stat-content">
                                <h3 id="totalUsuarios">-</h3>
                                <p>Usuarios Registrados</p>
                                <small>Docentes y estudiantes</small>
                            </div>
                        </div>
                    </div>

                    <div class="dashboard-grid">
                        <div class="recent-activity uta-card">
                            <div class="card-header">
                                <h3>
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
                                    </svg>
                                    Actividad Reciente
                                </h3>
                            </div>
                            <div id="recentActivity" class="activity-list">
                                <div class="loading-state">
                                    <div class="spinner"></div>
                                    <p>Cargando actividad reciente...</p>
                                </div>
                            </div>
                        </div>

                        <div class="quick-actions uta-card">
                            <div class="card-header">
                                <h3>
                                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z" />
                                    </svg>
                                    Acciones Rápidas
                                </h3>
                            </div>
                            <div class="quick-actions-grid">
                                <button class="quick-action-btn" onclick="Dashboard.loadModule('articulos')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z" />
                                    </svg>
                                    <span>Nuevo Uniforme</span>
                                </button>

                                <button class="quick-action-btn" onclick="Dashboard.loadModule('prestamos')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8l-6-6z" />
                                    </svg>
                                    <span>Nuevo Préstamo</span>
                                </button>

                                <button class="quick-action-btn" onclick="Dashboard.loadModule('reportes')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M3 3v18h18V3H3zm16 16H5V5h14v14z" />
                                    </svg>
                                    <span>Ver Reportes</span>
                                </button>

                                <button class="quick-action-btn" onclick="Dashboard.loadModule('usuarios')">
                                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M16 7a4 4 0 1 1-8 0 4 4 0 0 1 8 0z" />
                                    </svg>
                                    <span>Gestionar Usuarios</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="institution-banner">
                        <div class="banner-content">
                            <div class="banner-logo">
                                <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 3L1 9l4 2.18v6L12 21l7-3.82v-6L22 9l-10-6zM18.82 9L12 12.72 5.18 9 12 5.28 18.82 9zM17 15.99l-5 2.73-5-2.73v-3.72L12 15l5-2.73v3.72z" />
                                </svg>
                            </div>
                            <div class="banner-info">
                                <h4>Universidad Técnica de Ambato</h4>
                                <p>Facultad de Ciencias Humanas y de la Educación</p>
                                <p>Carrera de Cultura Física y Entrenamiento Deportivo</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modales -->
    <div id="actionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">Acción</h3>
                <button class="close-button" type="button">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <div id="modal-body" class="modal-body">
                <!-- Contenido dinámico -->
            </div>
        </div>
    </div>

    <div id="confirmModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>Confirmar Acción</h3>
                <button class="close-confirm" type="button">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                    </svg>
                </button>
            </div>
            <div class="modal-body">
                <div class="confirm-icon">
                    <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" />
                    </svg>
                </div>
                <p id="confirm-message">¿Está seguro de realizar esta acción?</p>
                <div class="modal-actions">
                    <button id="confirmYes" class="btn btn-danger">Sí, Continuar</button>
                    <button id="confirmNo" class="btn btn-secondary">Cancelar</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="/Scripts/dashboard.js"></script>
    <script src="/Scripts/user-management.js"></script>
    <script src="/Scripts/article-management.js"></script>
    <script src="/Scripts/loan-management.js"></script>

    <script>
        // Reloj en tiempo real
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleString('es-EC', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
            const timeElement = document.getElementById('currentTime');
            if (timeElement) {
                timeElement.textContent = timeString;
            }
        }

        setInterval(updateTime, 1000);
        updateTime();
    </script>
</body>
</html>